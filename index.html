async function loadMarketData() {
  const icon = document.getElementById('refreshIcon');
  icon.classList.add('spin');

  try {
    if (!isLive || !API_KEY) {
      renderAll(DEMO_DATA);
      return;
    }

    // ✅ 호출 1개만: USD/KRW
    const fx = await fetchFX();

    const live = {
      ...DEMO_DATA,
      // ✅ 지수(QQQ/SPY)는 데모 그대로 유지 (호출 안 함)
      nasdaq: DEMO_DATA.nasdaq,
      sp500: DEMO_DATA.sp500,

      // ✅ 환율만 실시간 반영
      fx: {
        ...DEMO_DATA.fx,
        usd: Math.round(fx).toLocaleString(),
        usdChg: fx > 1340 ? `+${(fx - 1340).toFixed(0)}원` : `${(fx - 1340).toFixed(0)}원`,
        usdUp: fx < 1340,
      },

      summary: `현재 <strong>USD/KRW</strong>만 실시간(Alpha Vantage)으로 표시 중입니다.<br/>
                지수/국내/부동산/뉴스/종목은 데모 데이터(안정 모드)로 표시합니다.`
    };

    renderAll(live);

    const t = new Date();
    document.getElementById('lastUpdated').textContent =
      `마지막 업데이트: ${t.getHours()}:${String(t.getMinutes()).padStart(2,'0')}:${String(t.getSeconds()).padStart(2,'0')}`;

  } catch (e) {
    console.error(e);
    showToast('⚠️ 환율 실시간 호출 실패 → 데모로 표시합니다', 3500);
    renderAll(DEMO_DATA);
  } finally {
    icon.classList.remove('spin');
  }
}
